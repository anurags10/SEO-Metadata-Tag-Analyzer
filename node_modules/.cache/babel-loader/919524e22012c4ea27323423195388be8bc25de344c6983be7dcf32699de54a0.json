{"ast":null,"code":"// Simple Proxy Service for fetching website content\n// Basic fallback options to handle CORS restrictions\n\nconst PROXY_SERVICES = [{\n  name: 'CORS Anywhere',\n  url: 'https://cors-anywhere.herokuapp.com/',\n  transform: data => data\n}, {\n  name: 'CORS Proxy',\n  url: 'https://corsproxy.io/?',\n  transform: data => data\n}, {\n  name: 'AllOrigins',\n  url: 'https://api.allorigins.win/get',\n  transform: data => data.contents\n}];\nexport const fetchWebsiteContent = async url => {\n  var _lastError;\n  let lastError = null;\n\n  // Try each proxy service until one works\n  for (const proxy of PROXY_SERVICES) {\n    try {\n      console.log(`Trying ${proxy.name} proxy...`);\n      let proxyUrl;\n      if (proxy.name === 'CORS Anywhere') {\n        proxyUrl = proxy.url + url;\n      } else if (proxy.name === 'CORS Proxy') {\n        proxyUrl = proxy.url + encodeURIComponent(url);\n      } else {\n        proxyUrl = `${proxy.url}?url=${encodeURIComponent(url)}`;\n      }\n      const response = await fetch(proxyUrl, {\n        method: 'GET',\n        headers: {\n          'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.text();\n      const transformedData = proxy.transform(data);\n      if (transformedData && transformedData.length > 0) {\n        console.log(`✅ Successfully fetched content using ${proxy.name}`);\n        return transformedData;\n      } else {\n        throw new Error('Empty content received');\n      }\n    } catch (error) {\n      console.warn(`${proxy.name} failed:`, error.message);\n      lastError = error;\n      continue;\n    }\n  }\n\n  // If all proxies failed, provide simple error message\n  throw new Error(`All proxy services failed. Last error: ${((_lastError = lastError) === null || _lastError === void 0 ? void 0 : _lastError.message) || 'Unknown error'}. ` + 'Try using Manual HTML Input instead.');\n};\n\n// Alternative method: Use browser extension or manual input\nexport const getManualInputInstructions = () => {\n  return {\n    title: 'Manual HTML Input',\n    description: 'If automatic fetching fails, you can manually input the HTML content',\n    steps: ['1. Visit the website you want to analyze in a new tab', '2. Right-click and select \"View Page Source\" (or press Ctrl+U / Cmd+U)', '3. Copy all the HTML content (Ctrl+A, Ctrl+C)', '4. Paste it in the manual input field below']\n  };\n};\n\n// Validate HTML content\nexport const validateHTML = htmlContent => {\n  if (!htmlContent || typeof htmlContent !== 'string') {\n    return {\n      valid: false,\n      error: 'Content must be a non-empty string'\n    };\n  }\n  if (htmlContent.length < 100) {\n    return {\n      valid: false,\n      error: 'Content seems too short to be valid HTML'\n    };\n  }\n  if (!htmlContent.includes('<html') && !htmlContent.includes('<body')) {\n    return {\n      valid: false,\n      error: 'Content does not appear to be valid HTML'\n    };\n  }\n  return {\n    valid: true\n  };\n};","map":{"version":3,"names":["PROXY_SERVICES","name","url","transform","data","contents","fetchWebsiteContent","_lastError","lastError","proxy","console","log","proxyUrl","encodeURIComponent","response","fetch","method","headers","ok","Error","status","statusText","text","transformedData","length","error","warn","message","getManualInputInstructions","title","description","steps","validateHTML","htmlContent","valid","includes"],"sources":["/Users/anuragsingh/Documents/Projects/SEO Analyser/src/utils/proxyService.js"],"sourcesContent":["// Simple Proxy Service for fetching website content\n// Basic fallback options to handle CORS restrictions\n\nconst PROXY_SERVICES = [\n  {\n    name: 'CORS Anywhere',\n    url: 'https://cors-anywhere.herokuapp.com/',\n    transform: (data) => data\n  },\n  {\n    name: 'CORS Proxy',\n    url: 'https://corsproxy.io/?',\n    transform: (data) => data\n  },\n  {\n    name: 'AllOrigins',\n    url: 'https://api.allorigins.win/get',\n    transform: (data) => data.contents\n  }\n];\n\nexport const fetchWebsiteContent = async (url) => {\n  let lastError = null;\n  \n  // Try each proxy service until one works\n  for (const proxy of PROXY_SERVICES) {\n    try {\n      console.log(`Trying ${proxy.name} proxy...`);\n      \n      let proxyUrl;\n      if (proxy.name === 'CORS Anywhere') {\n        proxyUrl = proxy.url + url;\n      } else if (proxy.name === 'CORS Proxy') {\n        proxyUrl = proxy.url + encodeURIComponent(url);\n      } else {\n        proxyUrl = `${proxy.url}?url=${encodeURIComponent(url)}`;\n      }\n      \n      const response = await fetch(proxyUrl, {\n        method: 'GET',\n        headers: {\n          'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n      const data = await response.text();\n      const transformedData = proxy.transform(data);\n      \n      if (transformedData && transformedData.length > 0) {\n        console.log(`✅ Successfully fetched content using ${proxy.name}`);\n        return transformedData;\n      } else {\n        throw new Error('Empty content received');\n      }\n      \n    } catch (error) {\n      console.warn(`${proxy.name} failed:`, error.message);\n      lastError = error;\n      continue;\n    }\n  }\n  \n  // If all proxies failed, provide simple error message\n  throw new Error(\n    `All proxy services failed. Last error: ${lastError?.message || 'Unknown error'}. ` +\n    'Try using Manual HTML Input instead.'\n  );\n};\n\n// Alternative method: Use browser extension or manual input\nexport const getManualInputInstructions = () => {\n  return {\n    title: 'Manual HTML Input',\n    description: 'If automatic fetching fails, you can manually input the HTML content',\n    steps: [\n      '1. Visit the website you want to analyze in a new tab',\n      '2. Right-click and select \"View Page Source\" (or press Ctrl+U / Cmd+U)',\n      '3. Copy all the HTML content (Ctrl+A, Ctrl+C)',\n      '4. Paste it in the manual input field below'\n    ]\n  };\n};\n\n// Validate HTML content\nexport const validateHTML = (htmlContent) => {\n  if (!htmlContent || typeof htmlContent !== 'string') {\n    return { valid: false, error: 'Content must be a non-empty string' };\n  }\n  \n  if (htmlContent.length < 100) {\n    return { valid: false, error: 'Content seems too short to be valid HTML' };\n  }\n  \n  if (!htmlContent.includes('<html') && !htmlContent.includes('<body')) {\n    return { valid: false, error: 'Content does not appear to be valid HTML' };\n  }\n  \n  return { valid: true };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}